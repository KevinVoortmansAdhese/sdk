function Adhese(){return this.config={debug:!1},this.request={},this.ads=[],this.that=this,this.helper=new this.Helper,this.detection=new this.Detection,this}Adhese.prototype.Ad=function(e,t,n){var i={write:!1};return this.format=t,this.options=e.helper.merge(i,n),this},Adhese.prototype.init=function(e){this.config.debug=e.debug,this.helper.log("Adhese: initializing..."),this.config.jquery="undefined"!=typeof jQuery,e.host&&(this.config.host=e.host),e.location&&"function"==typeof e.location?(this.config.location=e.location(),this.helper.log('options.location=="function"')):e.location&&"string"==typeof e.location?(this.config.location=e.location,this.helper.log('options.location=="string"')):this.config.location="testlocation",this.registerRequestParameter("rn",Math.round(1e4*Math.random())),"function"==typeof Fingerprint&&this.registerRequestParameter("fp",new Fingerprint({canvas:!0}).get()),this.registerRequestParameter("pr",window.devicePixelRatio||1),this.registerRequestParameter("re",this.helper.stringToHex(document.referrer)),this.registerRequestParameter("ur",this.helper.stringToHex(window.location.href)),this.userAgent=this.helper.getUserAgent();for(var t in this.userAgent)this.registerRequestParameter("br",this.userAgent[t]);"function"==typeof this.Detection&&(this.registerRequestParameter("dt",this.detection.device()),this.registerRequestParameter("br",this.detection.device())),this.helper.log("Adhese: initialized with config:",JSON.stringify(this.config))},Adhese.prototype.registerRequestParameter=function(e,t){var n=this.request[e];n||(n=new Array),n.push(t),this.request[e]=n},Adhese.prototype.tag=function(e,t){this.helper.log(e,JSON.stringify(t));var n=new this.Ad(this,e,t);return this.ads.push([e,n]),n.options.write&&this.write(n),n},Adhese.prototype.write=function(e){this.helper.log("Adhese.write: request uri: "+this.getRequestUri(e,{type:"js"})),document.write('<script type="text/javascript" src="'+this.getRequestUri(e,{type:"js"})+'"></script>')},Adhese.prototype.track=function(e){this.helper.addTrackingPixel(e)},Adhese.prototype.trackByUrl=function(e){this.helper.addTrackingPixel(e)},Adhese.prototype.getMultipleRequestUri=function(e,t){var n=this.config.host;switch(t||(t={type:"js"}),t.type){case"json":n+="json/";break;case"jsonp":t.callbackFunctionName||(t.callbackFunctionName="callback"),n+="jsonp/"+t.callbackFunctionName+"/";break;default:n+="ad/"}for(var i=e.length-1;i>=0;i--){var r=e[i],o="";o=r.options.position&&r.options.location?this.options.location+r.options.position:r.options.position?this.config.location+r.options.position:r.options.location?r.options.location:this.config.location,n+="sl"+o+"-"+r.format+"/"}for(var s in this.request){for(var a=s,h=0;h<this.request[s].length;h++)a+=this.request[s][h]+(this.request[s].length-1>h?";":"");n+=a+"/"}return n+="?t="+(new Date).getTime()},Adhese.prototype.getRequestUri=function(e,t){var n=[e];return this.getMultipleRequestUri(n,t)},Adhese.prototype.syncUser=function(e,t){"rubicon"==e&&this.rubiconUserSync(t)},Adhese.prototype.Helper=function(){this.oslist=[{string:navigator.userAgent,subString:"Windows Phone",identity:"WindowsPhone"},{string:navigator.userAgent,subString:"Windows NT 6.3",identity:"Windows8.1"},{string:navigator.userAgent,subString:"Windows NT 6.2",identity:"Windows8"},{string:navigator.userAgent,subString:"Windows NT 6.1",identity:"Windows7"},{string:navigator.userAgent,subString:"Windows NT 6.0",identity:"WindowsVista"},{string:navigator.userAgent,subString:"Windows NT 5.1",identity:"WindowsXP"},{string:navigator.userAgent,subString:"Windows 98",identity:"Windows98"},{string:navigator.userAgent,subString:"Android",identity:"Android"},{string:navigator.userAgent,subString:"iPhone",identity:"iOS"},{string:navigator.userAgent,subString:"iPad",identity:"iOS"},{string:navigator.platform,subString:"Mac",identity:"OSX"},{string:navigator.platform,subString:"Linux",identity:"Linux"}],this.browserlist=[{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"}],this.devicelist=[{string:navigator.userAgent,subString:"iPad",identity:"iPad"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone"},{string:navigator.userAgent,subString:"Mac",identity:"Mac"}]},Adhese.prototype.Helper.prototype.log=function(){this.logObjs=this.logObjs||{},this.logs=this.logs||[];for(var e="",t=(new Date).getTime(),n=0,i=arguments;n<i.length;n++)i[n]&&(e+=i[n]+" ");this.logObjs[t]=logObj={msg:e},this.logs.push([t,arguments]),window.location.search.match("debug")&&console.log(t,arguments)},Adhese.prototype.Helper.prototype.debug=function(){for(var e in this.logs){var t=this.logs[e];console.log(t[0],t[1])}},Adhese.prototype.Helper.prototype.debugTable=function(){"function"==typeof console.table&&console.table(this.logObjs)},Adhese.prototype.Helper.prototype.getMetaTagContent=function(){},Adhese.prototype.Helper.prototype.getQueryStringParameter=function(){var e=RegExp("[?&]"+key+"=([^&]*)").exec(window.location.search);return e?decodeURIComponent(e[1].replace(/\+/g," ")):default_},Adhese.prototype.Helper.prototype.addTrackingPixel=function(e){var t=document.createElement("img");t.src=e,t.style.height="1px",t.style.width="1px",t.style.margin="-1px",t.style.border="0",t.style.position="absolute",t.style.top="0",document.body.appendChild(t)},Adhese.prototype.Helper.prototype.getScreenProperties=function(){var e=new Object;return e.width=window.innerWidth?window.innerWidth:document.body.offsetWidth,e.height=window.innerHeight?window.innerHeight:document.body.offsetHeight,e},Adhese.prototype.Helper.prototype.addEventListener=function(e,t){adhese.config.jquery?$(window).bind(e,t):window.addEventListener?window.addEventListener(e,t,!1):window.attachEvent&&window.attachEvent("on"+e,t)},Adhese.prototype.Helper.prototype.removeEventListener=function(e,t){adhese.config.jquery?$(window).unbind(e,t):window.removeEventListener?window.removeEventListener(e,t,!1):window.detachEvent&&window.detachEvent("on"+e,t)},Adhese.prototype.Helper.prototype.getAbsoluteOffset=function(e){var t={top:0,left:0};if("undefined"!=typeof e)for(t.left=0,t.top=0;e;e=e.offsetParent)t.left+=e.offsetLeft,t.top+=e.offsetTop;return t},Adhese.prototype.Helper.prototype.getUserAgent=function(){var e={};return e.browser=this.searchString(this.browserlist)||"unknownBrowser",e.browserVersion=e.browser+this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"unknownVersion",e.os=this.searchString(this.oslist)||"unknownOS",e},Adhese.prototype.Helper.prototype.searchString=function(e){for(var t=0;t<e.length;t++){var n=e[t].string,i=e[t].prop;if(this.versionSearchString=e[t].versionSearch||e[t].identity,n){if(-1!=n.indexOf(e[t].subString))return e[t].identity}else if(i)return e[t].identity}},Adhese.prototype.Helper.prototype.searchVersion=function(e){var t=e.indexOf(this.versionSearchString);if(-1!=t)return parseFloat(e.substring(t+this.versionSearchString.length+1))},Adhese.prototype.Helper.prototype.merge=function(e,t){var n={};for(var i in e)n[i]=e[i];for(var i in t)n[i]=t[i];return n},Adhese.prototype.Helper.prototype.stringToHex=function(e){var t,n,i="";for(n=0;n<e.length;n++)t=e.charCodeAt(n).toString(16),i+=("000"+t).slice(-4);return i},Adhese.prototype.Helper.prototype.createCookie=function(e,t,n){if(n){var i=new Date;i.setTime(i.getTime()+24*n*60*60*1e3);var r="; expires="+i.toGMTString()}else var r="";document.cookie=e+"="+t+r+"; path=/"},Adhese.prototype.Helper.prototype.readCookie=function(e){for(var t=e+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(var r=n[i];" "==r.charAt(0);)r=r.substring(1,r.length);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return null},Adhese.prototype.Helper.prototype.eraseCookie=function(e){this.createCookie(e,"",-1)},Adhese.prototype.Helper.prototype.eatsCookie=function(){return this.createCookie("adheseTestCookie","",1),this.readCookie("adheseTestCookie")?(this.eraseCookie("adheseTestCookie"),!0):!1},Adhese.prototype.Helper.prototype.getMetaContent=function(e){for(var t=document.getElementsByTagName("META"),n=[],i=t.length-1;i>=0;i--){var r=t[i];r&&(r.name===e||r.getAttribute("property")===e)&&r.content&&n.push(r.content)}return n},Adhese.prototype.Helper.prototype.adhElementInViewport=function(e){if("string"==typeof e&&(e=document.getElementById(e)),e){var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}return!1};var AdheseAjax={request:function(e){"string"==typeof e&&(e={url:e}),e.url=e.url||"",e.method=e.method||"get",e.data=e.data||{};var t=function(e,t){var n,i=[];for(var r in e)i.push(r+"="+encodeURIComponent(e[r]));return n=i.join("&"),""!=n?t?t.indexOf("?")<0?"?"+n:"&"+n:n:""},n={host:{},process:function(e){var n=this;this.xhr=null;try{this.xhr=new ActiveXObject("Msxml2.XMLHTTP")}catch(i){try{this.xhr=new ActiveXObject("Microsoft.XMLHTTP")}catch(i){try{this.xhr=new XMLHttpRequest}catch(i){this.xhr=!1}}}return this.xhr&&(this.xhr.onreadystatechange=function(){if(4==n.xhr.readyState&&200==n.xhr.status){var t=n.xhr.responseText;e.json===!0&&"undefined"!=typeof JSON&&(t=JSON.parse(t)),n.doneCallback&&n.doneCallback.apply(n.host,[t,n.xhr])}else 4==n.xhr.readyState&&n.failCallback&&n.failCallback.apply(n.host,[n.xhr]);n.alwaysCallback&&n.alwaysCallback.apply(n.host,[n.xhr])}),"get"==e.method?this.xhr.open("GET",e.url+t(e.data,e.url),!0):(this.xhr.open(e.method,e.url,!0),this.setHeaders({"X-Requested-With":"XMLHttpRequest","Content-type":"application/x-www-form-urlencoded"})),e.headers&&"object"==typeof e.headers&&this.setHeaders(e.headers),setTimeout(function(){"get"==e.method?n.xhr.send():n.xhr.send(t(e.data))},20),this},done:function(e){return this.doneCallback=e,this},fail:function(e){return this.failCallback=e,this},always:function(e){return this.alwaysCallback=e,this},setHeaders:function(e){for(var t in e)this.xhr&&this.xhr.setRequestHeader(t,e[t])}};return n.process(e)}};Adhese.prototype.Detection=function(){return this},Adhese.prototype.Detection.prototype.device=function(e){return e=e?e:window.navigator.userAgent,this.deviceType=e.match(/webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini|Mobile Safari|SymbianOS/i)&&!e.match(/Android/i)?"phone":e.match(/Mobile/i)&&e.match(/Android/i)?"phone":e.match(/iPad|Android|Tablet|Silk/i)?"tablet":"desktop",this.deviceType},function(e,t,n){"undefined"!=typeof module&&module.exports?module.exports=n():"function"==typeof define&&define.amd?define(n):t[e]=n()}("Fingerprint",this,function(){"use strict";var e=function(e){var t,n;t=Array.prototype.forEach,n=Array.prototype.map,this.each=function(e,n,i){if(null!==e)if(t&&e.forEach===t)e.forEach(n,i);else if(e.length===+e.length){for(var r=0,o=e.length;o>r;r++)if(n.call(i,e[r],r,e)==={})return}else for(var s in e)if(e.hasOwnProperty(s)&&n.call(i,e[s],s,e)==={})return},this.map=function(e,t,i){var r=[];return null==e?r:n&&e.map===n?e.map(t,i):(this.each(e,function(e,n,o){r[r.length]=t.call(i,e,n,o)}),r)},"object"==typeof e?(this.hasher=e.hasher,this.screen_resolution=e.screen_resolution,this.canvas=e.canvas,this.ie_activex=e.ie_activex):"function"==typeof e&&(this.hasher=e)};return e.prototype={get:function(){var e=[];if(e.push(navigator.userAgent),e.push(navigator.language),e.push(screen.colorDepth),this.screen_resolution){var t=this.getScreenResolution();"undefined"!=typeof t&&e.push(this.getScreenResolution().join("x"))}return e.push((new Date).getTimezoneOffset()),e.push(this.hasSessionStorage()),e.push(this.hasLocalStorage()),e.push(!!window.indexedDB),e.push(document.body?typeof document.body.addBehavior:"undefined"),e.push(typeof window.openDatabase),e.push(navigator.cpuClass),e.push(navigator.platform),e.push(navigator.doNotTrack),e.push(this.getPluginsString()),this.canvas&&this.isCanvasSupported()&&e.push(this.getCanvasFingerprint()),this.hasher?this.hasher(e.join("###"),31):this.murmurhash3_32_gc(e.join("###"),31)},murmurhash3_32_gc:function(e,t){var n,i,r,o,s,a,h,c;for(n=3&e.length,i=e.length-n,r=t,s=3432918353,a=461845907,c=0;i>c;)h=255&e.charCodeAt(c)|(255&e.charCodeAt(++c))<<8|(255&e.charCodeAt(++c))<<16|(255&e.charCodeAt(++c))<<24,++c,h=(65535&h)*s+(((h>>>16)*s&65535)<<16)&4294967295,h=h<<15|h>>>17,h=(65535&h)*a+(((h>>>16)*a&65535)<<16)&4294967295,r^=h,r=r<<13|r>>>19,o=5*(65535&r)+((5*(r>>>16)&65535)<<16)&4294967295,r=(65535&o)+27492+(((o>>>16)+58964&65535)<<16);switch(h=0,n){case 3:h^=(255&e.charCodeAt(c+2))<<16;case 2:h^=(255&e.charCodeAt(c+1))<<8;case 1:h^=255&e.charCodeAt(c),h=(65535&h)*s+(((h>>>16)*s&65535)<<16)&4294967295,h=h<<15|h>>>17,h=(65535&h)*a+(((h>>>16)*a&65535)<<16)&4294967295,r^=h}return r^=e.length,r^=r>>>16,r=2246822507*(65535&r)+((2246822507*(r>>>16)&65535)<<16)&4294967295,r^=r>>>13,r=3266489909*(65535&r)+((3266489909*(r>>>16)&65535)<<16)&4294967295,r^=r>>>16,r>>>0},hasLocalStorage:function(){try{return!!window.localStorage}catch(e){return!0}},hasSessionStorage:function(){try{return!!window.sessionStorage}catch(e){return!0}},isCanvasSupported:function(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))},isIE:function(){return"Microsoft Internet Explorer"===navigator.appName?!0:"Netscape"===navigator.appName&&/Trident/.test(navigator.userAgent)?!0:!1},getPluginsString:function(){return this.isIE()&&this.ie_activex?this.getIEPluginsString():this.getRegularPluginsString()},getRegularPluginsString:function(){return this.map(navigator.plugins,function(e){var t=this.map(e,function(e){return[e.type,e.suffixes].join("~")}).join(",");return[e.name,e.description,t].join("::")},this).join(";")},getIEPluginsString:function(){if(window.ActiveXObject){var e=["ShockwaveFlash.ShockwaveFlash","AcroPDF.PDF","PDF.PdfCtrl","QuickTime.QuickTime","rmocx.RealPlayer G2 Control","rmocx.RealPlayer G2 Control.1","RealPlayer.RealPlayer(tm) ActiveX Control (32-bit)","RealVideo.RealVideo(tm) ActiveX Control (32-bit)","RealPlayer","SWCtl.SWCtl","WMPlayer.OCX","AgControl.AgControl","Skype.Detection"];return this.map(e,function(e){try{return new ActiveXObject(e),e}catch(t){return null}}).join(";")}return""},getScreenResolution:function(){return[screen.height,screen.width]},getCanvasFingerprint:function(){var e=document.createElement("canvas"),t=e.getContext("2d"),n="http://valve.github.io";return t.textBaseline="top",t.font="14px 'Arial'",t.textBaseline="alphabetic",t.fillStyle="#f60",t.fillRect(125,1,62,20),t.fillStyle="#069",t.fillText(n,2,15),t.fillStyle="rgba(102, 204, 0, 0.7)",t.fillText(n,4,17),e.toDataURL()}},e}),Adhese.prototype.Events=function(){},Adhese.prototype.Events.prototype.add=function(e,t,n){n||(n=window),window.addEventListener?n.addEventListener(e,t,!1):window.attachEvent&&n.attachEvent("on"+e,t)},Adhese.prototype.Events.prototype.remove=function(e,t,n){n||(n=window),window.removeEventListener?n.removeEventListener(e,t,!1):window.attachEvent&&n.detachEvent("on"+e,t)},Adhese.prototype.rubiconUserSync=function(e){e&&e.rp_account&&""!=e.rp_account&&-1==document.cookie.indexOf("rubicon_uid")&&((new Image).src="http://pixel-eu.rubiconproject.com/exchange/sync.php?p="+e.rp_account)};