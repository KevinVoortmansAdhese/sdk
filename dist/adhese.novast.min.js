function Adhese(){return this.config={debug:!1},this.request={},this.requestExtra=[],this.ads=[],this.that=this,this.helper=new this.Helper,this.detection=new this.Detection,this}Adhese.prototype.Ad=function(e,t,i){var r={write:!1};return this.format=t,this.uid=t,this.options=e.helper.merge(r,i),this},Adhese.prototype.init=function(e){if(this.config.debug=e.debug,this.helper.log("Adhese: initializing..."),this.config.jquery="undefined"!=typeof jQuery,e.account){this.config.account=e.account;var t="http:";"file:"!=window.location.protocol&&(t=window.location.protocol),this.config.host=t+"//ads-"+e.account+".adhese.com/",this.config.poolHost=t+"//pool-"+e.account+".adhese.com/",this.config.clickHost=t+"//click-"+e.account+".adhese.com/",this.config.previewHost="https://"+e.account+".adhese.org/"}else e.host&&(this.config.host=e.host);e.previewHost&&(this.config.previewHost=e.previewHost),e.location&&"function"==typeof e.location?(this.config.location=e.location(),this.helper.log('options.location=="function"')):e.location&&"string"==typeof e.location?(this.config.location=e.location,this.helper.log('options.location=="string"')):this.config.location="testlocation",e.safeframe||0==e.safeframe?this.config.safeframe=!1:(this.config.safeframe=e.safeframe,this.safeframe=new this.SafeFrame(this.config.poolHost)),this.registerRequestParameter("rn",Math.round(1e4*Math.random())),"function"==typeof Fingerprint&&this.registerRequestParameter("fp",new Fingerprint({canvas:!0}).get()),this.registerRequestParameter("pr",window.devicePixelRatio||1),this.registerRequestParameter("re",this.helper.stringToHex(document.referrer.substr(0,200))),this.registerRequestParameter("ur",this.helper.stringToHex(window.location.href)),this.userAgent=this.helper.getUserAgent();for(var i in this.userAgent)this.registerRequestParameter("br",this.userAgent[i]);"function"==typeof this.Detection&&(this.registerRequestParameter("dt",this.detection.device()),this.registerRequestParameter("br",this.detection.device())),this.checkPreview(),this.checkVisible&&(addEventListener("load",this.checkVisible.bind(this),!1),addEventListener("scroll",this.checkVisible.bind(this),!1)),this.helper.log("Adhese: initialized with config:",JSON.stringify(this.config))},Adhese.prototype.registerRequestParameter=function(e,t){var i=this.request[e];i||(i=new Array),i.push(t),this.request[e]=i},Adhese.prototype.addRequestString=function(e){this.requestExtra.push(e)},Adhese.prototype.tag=function(e,t){var i=this;this.helper.log(e,JSON.stringify(t));var r=new this.Ad(this,e,t);if(this.previewActive){var o=this.previewFormats;for(var n in o)if(n==e){var s=o[e],a=new this.Ad(this,e,{write:!0});a.adType=e,a.ext="js",a.swfSrc=i.config.previewHost+"/creatives/preview/tag.do?id="+s.creative+"&slotId="+s.slot,a.width=s.width,a.height=s.height,console.log("preview"),console.log(a),r=a,addEventListener("load",i.showPreviewSign.bind(i))}}return this.ads.push([e,r]),r.options.write&&this.write(r),r},Adhese.prototype.write=function(e){if(this.config.safeframe){var t="";t=this.previewActive?e.swfSrc:this.getRequestUri(e,{type:"json"}),this.helper.log("Adhese.write: request uri: "+t+", safeframe enabled"),AdheseAjax.request({url:t,method:"get",json:!0}).done(function(e){adhese.safeframe.addPositions(e);for(var t=e.length-1;t>=0;t--)adhese.safeframe.render(e[t].adType)})}else{var t="";t=this.previewActive?e.swfSrc:this.getRequestUri(e,{type:"js"}),this.helper.log("Adhese.write: request uri: "+t),document.write('<script type="text/javascript" src="'+t+'"></script>')}},Adhese.prototype.track=function(e){this.helper.addTrackingPixel(e)},Adhese.prototype.trackByUrl=function(e){this.helper.addTrackingPixel(e)},Adhese.prototype.getMultipleRequestUri=function(e,t){var i=this.config.host;switch(t||(t={type:"js"}),t.type){case"json":i+="json/";break;case"jsonp":t.callbackFunctionName||(t.callbackFunctionName="callback"),i+="jsonp/"+t.callbackFunctionName+"/";break;default:i+="ad/"}for(var r=e.length-1;r>=0;r--){var o=e[r],n="";n=o.options.position&&o.options.location?this.options.location+o.options.position:o.options.position?this.config.location+o.options.position:o.options.location?o.options.location:this.config.location,i+="sl"+n+"-"+o.format+"/"}for(var s in this.request){for(var a=s,h=0;h<this.request[s].length;h++)a+=this.request[s][h]+(this.request[s].length-1>h?";":"");i+=a+"/"}for(var r=0,s=this.requestExtra;r<s.length;r++)s[r]&&(i+=s[r]+"/");return i+="?t="+(new Date).getTime()},Adhese.prototype.getRequestUri=function(e,t){var i=[e];return this.getMultipleRequestUri(i,t)},Adhese.prototype.syncUser=function(e,t){"rubicon"==e&&this.rubiconUserSync(t)},Adhese.prototype.Helper=function(){this.oslist=[{string:navigator.userAgent,subString:"Windows Phone",identity:"WindowsPhone"},{string:navigator.userAgent,subString:"Windows NT 10.0",identity:"Windows10"},{string:navigator.userAgent,subString:"Windows NT 6.3",identity:"Windows8.1"},{string:navigator.userAgent,subString:"Windows NT 6.2",identity:"Windows8"},{string:navigator.userAgent,subString:"Windows NT 6.1",identity:"Windows7"},{string:navigator.userAgent,subString:"Windows NT 6.0",identity:"WindowsVista"},{string:navigator.userAgent,subString:"Windows NT 5.1",identity:"WindowsXP"},{string:navigator.userAgent,subString:"Windows 98",identity:"Windows98"},{string:navigator.userAgent,subString:"Android",identity:"Android"},{string:navigator.userAgent,subString:"iPhone",identity:"iOS"},{string:navigator.userAgent,subString:"iPad",identity:"iOS"},{string:navigator.platform,subString:"Mac",identity:"OSX"},{string:navigator.platform,subString:"Linux",identity:"Linux"}],this.browserlist=[{string:navigator.userAgent,subString:"Trident/7",identity:"Explorer",versionSearch:"rv"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"}]},Adhese.prototype.Helper.prototype.log=function(){this.logObjs=this.logObjs||{},this.logs=this.logs||[];for(var e="",t=(new Date).getTime(),i=0,r=arguments;i<r.length;i++)r[i]&&(e+=r[i]+" ");this.logObjs[t]=logObj={msg:e},this.logs.push([t,arguments]),window.location.search.match("debug")&&console.log(t,arguments)},Adhese.prototype.Helper.prototype.debug=function(){for(var e in this.logs){var t=this.logs[e];console.log(t[0],t[1])}},Adhese.prototype.Helper.prototype.debugTable=function(){"function"==typeof console.table&&console.table(this.logObjs)},Adhese.prototype.Helper.prototype.getMetaTagContent=function(){},Adhese.prototype.Helper.prototype.getQueryStringParameter=function(){var e=RegExp("[?&]"+key+"=([^&]*)").exec(window.location.search);return e?decodeURIComponent(e[1].replace(/\+/g," ")):default_},Adhese.prototype.Helper.prototype.addTrackingPixel=function(e){var t=document.createElement("img");t.src=e,t.style.height="1px",t.style.width="1px",t.style.margin="-1px",t.style.border="0",t.style.position="absolute",t.style.top="0",document.body.appendChild(t)},Adhese.prototype.Helper.prototype.getScreenProperties=function(){var e=new Object;return e.width=window.innerWidth?window.innerWidth:document.body.offsetWidth,e.height=window.innerHeight?window.innerHeight:document.body.offsetHeight,e},Adhese.prototype.Helper.prototype.addEventListener=function(e,t,i){"undefined"==typeof i&&(i=window),i.addEventListener?i.addEventListener(e,t,!1):i.attachEvent&&i.attachEvent("on"+e,t)},Adhese.prototype.Helper.prototype.removeEventListener=function(e,t){window.removeEventListener?window.removeEventListener(e,t,!1):window.detachEvent&&window.detachEvent("on"+e,t)},Adhese.prototype.Helper.prototype.getAbsoluteOffset=function(e){var t={top:0,left:0};if("undefined"!=typeof e)for(t.left=0,t.top=0;e;e=e.offsetParent)t.left+=e.offsetLeft,t.top+=e.offsetTop;return t},Adhese.prototype.Helper.prototype.getUserAgent=function(){var e={};return e.browser=this.searchString(this.browserlist)||"unknownBrowser",e.browserVersion=e.browser+this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"unknownVersion",e.os=this.searchString(this.oslist)||"unknownOS",e},Adhese.prototype.Helper.prototype.searchString=function(e){for(var t=0;t<e.length;t++){var i=e[t].string,r=e[t].prop;if(this.versionSearchString=e[t].versionSearch||e[t].identity,i){if(-1!=i.indexOf(e[t].subString))return e[t].identity}else if(r)return e[t].identity}},Adhese.prototype.Helper.prototype.searchVersion=function(e){var t=e.indexOf(this.versionSearchString);if(-1!=t)return parseFloat(e.substring(t+this.versionSearchString.length+1))},Adhese.prototype.Helper.prototype.merge=function(e,t){var i={};for(var r in e)i[r]=e[r];for(var r in t)i[r]=t[r];return i},Adhese.prototype.Helper.prototype.stringToHex=function(e){var t,i,r="";for(i=0;i<e.length;i++)t=e.charCodeAt(i).toString(16),r+=("000"+t).slice(-4);return r},Adhese.prototype.Helper.prototype.createCookie=function(e,t,i){var r="";if(i){var o=new Date;o.setTime(o.getTime()+24*i*60*60*1e3-60*o.getTimezoneOffset()*1e3),r="; expires="+o.toUTCString()}document.cookie=e+"="+t+r+"; path=/"},Adhese.prototype.Helper.prototype.readCookie=function(e){for(var t=e+"=",i=document.cookie.split(";"),r=0;r<i.length;r++){for(var o=i[r];" "==o.charAt(0);)o=o.substring(1,o.length);if(0==o.indexOf(t))return o.substring(t.length,o.length)}return null},Adhese.prototype.Helper.prototype.eraseCookie=function(e){this.createCookie(e,"",-1)},Adhese.prototype.Helper.prototype.eatsCookie=function(){return this.createCookie("adheseTestCookie","",1),null!=this.readCookie("adheseTestCookie")?(this.eraseCookie("adheseTestCookie"),!0):!1},Adhese.prototype.Helper.prototype.getMetaContent=function(e){for(var t=document.getElementsByTagName("META"),i=[],r=t.length-1;r>=0;r--){var o=t[r];o&&(o.name===e||o.getAttribute("property")===e)&&o.content&&i.push(o.content)}return i},Adhese.prototype.Helper.prototype.adhElementInViewport=function(e){if("string"==typeof e&&(e=document.getElementById(e)),e){var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}return!1},Adhese.prototype.checkPreview=function(){if(this.previewFormats={},!this.config.previewHost)return!1;if(-1!=window.location.search.indexOf("adhesePreview")){this.helper.log("checking for preview");for(var e=window.location.search.substring(1).split("&"),t="",i="",r="",o="",n=0,s=0,a=0;a<e.length;a++)"adhesePreviewCreativeId"==e[a].split("=")[0]&&(t=unescape(e[a].split("=")[1])),"adhesePreviewSlotId"==e[a].split("=")[0]&&(i=e[a].split("=")[1]),"adhesePreviewCreativeTemplate"==e[a].split("=")[0]&&(r=e[a].split("=")[1]),"adhesePreviewTemplateFile"==e[a].split("=")[0]&&(o=e[a].split("=")[1]),"adhesePreviewWidth"==e[a].split("=")[0]&&(n=e[a].split("=")[1]),"adhesePreviewHeight"==e[a].split("=")[0]&&(s=e[a].split("=")[1]);""!=i&&""!=t&&(this.previewFormats[r]={slot:i,creative:t,templateFile:o,width:n,height:s}),console.log(this.previewFormats);var t=[];for(k in this.previewFormats)t.push(k+","+this.previewFormats[k].creative+","+this.previewFormats[k].slot+","+this.previewFormats[k].template+","+this.previewFormats[k].width+","+this.previewFormats[k].height);this.helper.createCookie("adhese_preview",t.join("|"),0),this.previewActive=!0}else if(this.helper.readCookie("adhese_preview")){for(var h=this.helper.readCookie("adhese_preview").split("|"),a=0;a<h.length;a++){var t=h[a].split(",");this.previewFormats[t[0]]={creative:t[1],slot:t[2],template:t[3],width:t[4],height:t[5]}}this.previewActive=!0}},Adhese.prototype.showPreviewSign=function(){var e=this,t=document.createElement("DIV"),i='<div id="adhPreviewMessage" style="cursor:pointer;font-family:Helvetica,Verdana; font-size:18px; text-align:center; background-color: #C8EDCE; color: #9E9E9E; position:fixed; top:0px; /* left: auto; */ padding:4px; border-style:dashed; border:2px; border-color:#000000;z-index:9999;width: 80%;margin-left: 10%;height: 23px;top: 2px;"><b>Adhese preview active. Click to disable</div>';t.innerHTML=i,document.body.appendChild(t),e.helper.addEventListener("click",e.closePreviewSign.bind(e),t)},Adhese.prototype.closePreviewSign=function(){this.helper.eraseCookie("adhese_preview"),-1!=location.search.indexOf("adhesePreviewCreativeId")?location.href=location.href.split("?")[0]:location.reload()};var AdheseAjax={request:function(e){"string"==typeof e&&(e={url:e}),e.url=e.url||"",e.method=e.method||"get",e.data=e.data||{};var t=function(e,t){var i,r=[];for(var o in e)r.push(o+"="+encodeURIComponent(e[o]));return i=r.join("&"),""!=i?t?t.indexOf("?")<0?"?"+i:"&"+i:i:""},i={host:{},process:function(e){var i=this;if(this.xhr=null,document.all&&!window.atob)try{this.xhr=new ActiveXObject("Msxml2.XMLHTTP")}catch(r){try{this.xhr=new ActiveXObject("Microsoft.XMLHTTP")}catch(r){this.xhr=!1}}else try{this.xhr=new XMLHttpRequest}catch(r){this.xhr=!1}return this.xhr&&(this.xhr.onreadystatechange=function(){if(4==i.xhr.readyState&&200==i.xhr.status){var t=i.xhr.responseText;e.json===!0&&"undefined"!=typeof JSON&&(t=JSON.parse(t)),i.doneCallback&&i.doneCallback.apply(i.host,[t,i.xhr])}else 4==i.xhr.readyState&&i.failCallback&&i.failCallback.apply(i.host,[i.xhr]);i.alwaysCallback&&i.alwaysCallback.apply(i.host,[i.xhr])}),"get"==e.method?this.xhr.open("GET",e.url+t(e.data,e.url),!0):(this.xhr.open(e.method,e.url,!0),this.setHeaders({"X-Requested-With":"XMLHttpRequest","Content-type":"application/x-www-form-urlencoded"})),e.headers&&"object"==typeof e.headers&&this.setHeaders(e.headers),setTimeout(function(){"get"==e.method?i.xhr.send():i.xhr.send(t(e.data))},20),this},done:function(e){return this.doneCallback=e,this},fail:function(e){return this.failCallback=e,this},always:function(e){return this.alwaysCallback=e,this},setHeaders:function(e){for(var t in e)this.xhr&&this.xhr.setRequestHeader(t,e[t])}};return i.process(e)}};Adhese.prototype.Detection=function(){return this},Adhese.prototype.Detection.prototype.device=function(e){return e=e?e:window.navigator.userAgent,this.deviceType=e.match(/webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini|Mobile Safari|SymbianOS/i)&&!e.match(/Android/i)?"phone":e.match(/Mobile/i)&&e.match(/Android/i)?"phone":e.match(/iPad|Android|Tablet|Silk/i)?"tablet":"desktop",this.deviceType},function(e,t,i){"undefined"!=typeof module&&module.exports?module.exports=i():"function"==typeof define&&define.amd?define(i):t[e]=i()}("Fingerprint",this,function(){"use strict";var e=function(e){var t,i;t=Array.prototype.forEach,i=Array.prototype.map,this.each=function(e,i,r){if(null!==e)if(t&&e.forEach===t)e.forEach(i,r);else if(e.length===+e.length){for(var o=0,n=e.length;n>o;o++)if(i.call(r,e[o],o,e)==={})return}else for(var s in e)if(e.hasOwnProperty(s)&&i.call(r,e[s],s,e)==={})return},this.map=function(e,t,r){var o=[];return null==e?o:i&&e.map===i?e.map(t,r):(this.each(e,function(e,i,n){o[o.length]=t.call(r,e,i,n)}),o)},"object"==typeof e?(this.hasher=e.hasher,this.screen_resolution=e.screen_resolution,this.canvas=e.canvas,this.ie_activex=e.ie_activex):"function"==typeof e&&(this.hasher=e)};return e.prototype={get:function(){var e=[];if(e.push(navigator.userAgent),e.push(navigator.language),e.push(screen.colorDepth),this.screen_resolution){var t=this.getScreenResolution();"undefined"!=typeof t&&e.push(this.getScreenResolution().join("x"))}return e.push((new Date).getTimezoneOffset()),e.push(this.hasSessionStorage()),e.push(this.hasLocalStorage()),e.push(!!window.indexedDB),e.push(document.body?typeof document.body.addBehavior:"undefined"),e.push(typeof window.openDatabase),e.push(navigator.cpuClass),e.push(navigator.platform),e.push(navigator.doNotTrack),e.push(this.getPluginsString()),this.canvas&&this.isCanvasSupported()&&e.push(this.getCanvasFingerprint()),this.hasher?this.hasher(e.join("###"),31):this.murmurhash3_32_gc(e.join("###"),31)},murmurhash3_32_gc:function(e,t){var i,r,o,n,s,a,h,c;for(i=3&e.length,r=e.length-i,o=t,s=3432918353,a=461845907,c=0;r>c;)h=255&e.charCodeAt(c)|(255&e.charCodeAt(++c))<<8|(255&e.charCodeAt(++c))<<16|(255&e.charCodeAt(++c))<<24,++c,h=(65535&h)*s+(((h>>>16)*s&65535)<<16)&4294967295,h=h<<15|h>>>17,h=(65535&h)*a+(((h>>>16)*a&65535)<<16)&4294967295,o^=h,o=o<<13|o>>>19,n=5*(65535&o)+((5*(o>>>16)&65535)<<16)&4294967295,o=(65535&n)+27492+(((n>>>16)+58964&65535)<<16);switch(h=0,i){case 3:h^=(255&e.charCodeAt(c+2))<<16;case 2:h^=(255&e.charCodeAt(c+1))<<8;case 1:h^=255&e.charCodeAt(c),h=(65535&h)*s+(((h>>>16)*s&65535)<<16)&4294967295,h=h<<15|h>>>17,h=(65535&h)*a+(((h>>>16)*a&65535)<<16)&4294967295,o^=h}return o^=e.length,o^=o>>>16,o=2246822507*(65535&o)+((2246822507*(o>>>16)&65535)<<16)&4294967295,o^=o>>>13,o=3266489909*(65535&o)+((3266489909*(o>>>16)&65535)<<16)&4294967295,o^=o>>>16,o>>>0},hasLocalStorage:function(){try{return!!window.localStorage}catch(e){return!0}},hasSessionStorage:function(){try{return!!window.sessionStorage}catch(e){return!0}},isCanvasSupported:function(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))},isIE:function(){return"Microsoft Internet Explorer"===navigator.appName?!0:"Netscape"===navigator.appName&&/Trident/.test(navigator.userAgent)?!0:!1},getPluginsString:function(){return this.isIE()&&this.ie_activex?this.getIEPluginsString():this.getRegularPluginsString()},getRegularPluginsString:function(){return this.map(navigator.plugins,function(e){var t=this.map(e,function(e){return[e.type,e.suffixes].join("~")}).join(",");return[e.name,e.description,t].join("::")},this).join(";")},getIEPluginsString:function(){if(window.ActiveXObject){var e=["ShockwaveFlash.ShockwaveFlash","AcroPDF.PDF","PDF.PdfCtrl","QuickTime.QuickTime","rmocx.RealPlayer G2 Control","rmocx.RealPlayer G2 Control.1","RealPlayer.RealPlayer(tm) ActiveX Control (32-bit)","RealVideo.RealVideo(tm) ActiveX Control (32-bit)","RealPlayer","SWCtl.SWCtl","WMPlayer.OCX","AgControl.AgControl","Skype.Detection"];return this.map(e,function(e){try{return new ActiveXObject(e),e}catch(t){return null}}).join(";")}return""},getScreenResolution:function(){return[screen.height,screen.width]},getCanvasFingerprint:function(){var e=document.createElement("canvas"),t=e.getContext("2d"),i="http://valve.github.io";return t.textBaseline="top",t.font="14px 'Arial'",t.textBaseline="alphabetic",t.fillStyle="#f60",t.fillRect(125,1,62,20),t.fillStyle="#069",t.fillText(i,2,15),t.fillStyle="rgba(102, 204, 0, 0.7)",t.fillText(i,4,17),e.toDataURL()}},e}),Adhese.prototype.Events=function(){},Adhese.prototype.Events.prototype.add=function(e,t,i){i||(i=window),window.addEventListener?i.addEventListener(e,t,!1):window.attachEvent&&i.attachEvent("on"+e,t)},Adhese.prototype.Events.prototype.remove=function(e,t,i){i||(i=window),window.removeEventListener?i.removeEventListener(e,t,!1):window.attachEvent&&i.detachEvent("on"+e,t)},Adhese.prototype.rubiconUserSync=function(e){if(e&&e.rp_account&&""!=e.rp_account&&-1==document.cookie.indexOf("rubicon_uid_last_sync")){(new Image).src="https://pixel-eu.rubiconproject.com/exchange/sync.php?p="+e.rp_account;var t=new Date;t.setDate(t.getDate()+1),t.setHours(0),t.setMinutes(0),t.setSeconds(0);var i=t.getTime()-(new Date).getTime();this.helper.createCookie("rubicon_uid_last_sync",i,i/24/60/60/1e3)}};