function Adhese(){return this.config={debug:!1},this.request={},this.ads=[],this.that=this,this.helper=new this.Helper,this.detection=new this.Detection,this}function AdheseVastWrapper(e){this.debug=void 0!=e?e:!1}function AdheseVastAdBreak(e,t,n){this.breakId=e,this.timeOffset=t,this.ads=n}function AdheseVastInLine(e,t){this.impressions=e,this.creatives=t}function AdheseVastLinearAd(e,t,n,r,i,o){this.id=e,this.mediafile=t,this.duration=n,this.durationInSeconds=r,this.trackers=i,this.click=o,this.companions=new Array}function AdheseVastMediaFile(e,t){this.src=e,this.type=t}function AdheseVastCompanion(e,t,n,r){this.id=e,this.width=t,this.height=n,this.adSlotId=r}function AdheseVastNonLinearAd(e,t,n,r,i){this.id=e,this.width=t,this.height=n,this.trackers=r,this.click=i}function AdheseVastEventListener(e,t){this.event=e,this.listener=t}function AdheseVastHelper(){}Adhese.prototype.Ad=function(e,t,n){var r={write:!1};return this.format=t,this.options=e.helper.merge(r,n),this},Adhese.prototype.init=function(e){this.config.debug=e.debug,this.helper.log("Adhese: initializing..."),this.config.jquery="undefined"!=typeof jQuery,e.host&&(this.config.host=e.host),e.location&&"function"==typeof e.location?(this.config.location=e.location(),this.helper.log('options.location=="function"')):e.location&&"string"==typeof e.location?(this.config.location=e.location,this.helper.log('options.location=="string"')):this.config.location="testlocation",this.registerRequestParameter("rn",Math.round(1e4*Math.random())),"function"==typeof Fingerprint&&this.registerRequestParameter("fp",new Fingerprint({canvas:!0}).get()),this.registerRequestParameter("pr",window.devicePixelRatio||1),this.registerRequestParameter("re",this.helper.stringToHex(document.referrer)),this.registerRequestParameter("ur",this.helper.stringToHex(window.location.href)),this.userAgent=this.helper.getUserAgent();for(var t in this.userAgent)this.registerRequestParameter("br",this.userAgent[t]);"function"==typeof this.Detection&&(this.registerRequestParameter("dt",this.detection.device()),this.registerRequestParameter("br",this.detection.device())),this.helper.log("Adhese: initialized with config:",JSON.stringify(this.config))},Adhese.prototype.registerRequestParameter=function(e,t){var n=this.request[e];n||(n=new Array),n.push(t),this.request[e]=n},Adhese.prototype.tag=function(e,t){this.helper.log(e,JSON.stringify(t));var n=new this.Ad(this,e,t);return this.ads.push([e,n]),n.options.write&&this.write(n),n},Adhese.prototype.write=function(e){this.helper.log("Adhese.write: request uri: "+this.getRequestUri(e,{type:"js"})),document.write('<script type="text/javascript" src="'+this.getRequestUri(e,{type:"js"})+'"></script>')},Adhese.prototype.track=function(e){this.helper.addTrackingPixel(e)},Adhese.prototype.trackByUrl=function(e){this.helper.addTrackingPixel(e)},Adhese.prototype.getMultipleRequestUri=function(e,t){var n=this.config.host;switch(t||(t={type:"js"}),t.type){case"json":n+="json/";break;case"jsonp":t.callbackFunctionName||(t.callbackFunctionName="callback"),n+="jsonp/"+t.callbackFunctionName+"/";break;default:n+="ad/"}for(var r=e.length-1;r>=0;r--){var i=e[r],o="";o=i.options.position&&i.options.location?this.options.location+i.options.position:i.options.position?this.config.location+i.options.position:i.options.location?i.options.location:this.config.location,n+="sl"+o+"-"+i.format+"/"}for(var s in this.request){for(var a=s,h=0;h<this.request[s].length;h++)a+=this.request[s][h]+(this.request[s].length-1>h?";":"");n+=a+"/"}return n+="?t="+(new Date).getTime()},Adhese.prototype.getRequestUri=function(e,t){var n=[e];return this.getMultipleRequestUri(n,t)},Adhese.prototype.syncUser=function(e,t){"rubicon"==e&&this.rubiconUserSync(t)},Adhese.prototype.Helper=function(){this.oslist=[{string:navigator.userAgent,subString:"Windows Phone",identity:"WindowsPhone"},{string:navigator.userAgent,subString:"Windows NT 6.3",identity:"Windows8.1"},{string:navigator.userAgent,subString:"Windows NT 6.2",identity:"Windows8"},{string:navigator.userAgent,subString:"Windows NT 6.1",identity:"Windows7"},{string:navigator.userAgent,subString:"Windows NT 6.0",identity:"WindowsVista"},{string:navigator.userAgent,subString:"Windows NT 5.1",identity:"WindowsXP"},{string:navigator.userAgent,subString:"Windows 98",identity:"Windows98"},{string:navigator.userAgent,subString:"Android",identity:"Android"},{string:navigator.userAgent,subString:"iPhone",identity:"iOS"},{string:navigator.userAgent,subString:"iPad",identity:"iOS"},{string:navigator.platform,subString:"Mac",identity:"OSX"},{string:navigator.platform,subString:"Linux",identity:"Linux"}],this.browserlist=[{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"}],this.devicelist=[{string:navigator.userAgent,subString:"iPad",identity:"iPad"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone"},{string:navigator.userAgent,subString:"Mac",identity:"Mac"}]},Adhese.prototype.Helper.prototype.log=function(){this.logObjs=this.logObjs||{},this.logs=this.logs||[];for(var e="",t=(new Date).getTime(),n=0,r=arguments;n<r.length;n++)r[n]&&(e+=r[n]+" ");this.logObjs[t]=logObj={msg:e},this.logs.push([t,arguments]),window.location.search.match("debug")&&console.log(t,arguments)},Adhese.prototype.Helper.prototype.debug=function(){for(var e in this.logs){var t=this.logs[e];console.log(t[0],t[1])}},Adhese.prototype.Helper.prototype.debugTable=function(){"function"==typeof console.table&&console.table(this.logObjs)},Adhese.prototype.Helper.prototype.getMetaTagContent=function(){},Adhese.prototype.Helper.prototype.getQueryStringParameter=function(){var e=RegExp("[?&]"+key+"=([^&]*)").exec(window.location.search);return e?decodeURIComponent(e[1].replace(/\+/g," ")):default_},Adhese.prototype.Helper.prototype.addTrackingPixel=function(e){var t=document.createElement("img");t.src=e,t.style.height="1px",t.style.width="1px",t.style.margin="-1px",t.style.border="0",t.style.position="absolute",t.style.top="0",document.body.appendChild(t)},Adhese.prototype.Helper.prototype.getScreenProperties=function(){var e=new Object;return e.width=window.innerWidth?window.innerWidth:document.body.offsetWidth,e.height=window.innerHeight?window.innerHeight:document.body.offsetHeight,e},Adhese.prototype.Helper.prototype.addEventListener=function(e,t){adhese.config.jquery?$(window).bind(e,t):window.addEventListener?window.addEventListener(e,t,!1):window.attachEvent&&window.attachEvent("on"+e,t)},Adhese.prototype.Helper.prototype.removeEventListener=function(e,t){adhese.config.jquery?$(window).unbind(e,t):window.removeEventListener?window.removeEventListener(e,t,!1):window.detachEvent&&window.detachEvent("on"+e,t)},Adhese.prototype.Helper.prototype.getAbsoluteOffset=function(e){var t={top:0,left:0};if("undefined"!=typeof e)for(t.left=0,t.top=0;e;e=e.offsetParent)t.left+=e.offsetLeft,t.top+=e.offsetTop;return t},Adhese.prototype.Helper.prototype.getUserAgent=function(){var e={};return e.browser=this.searchString(this.browserlist)||"unknownBrowser",e.browserVersion=e.browser+this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"unknownVersion",e.os=this.searchString(this.oslist)||"unknownOS",e},Adhese.prototype.Helper.prototype.searchString=function(e){for(var t=0;t<e.length;t++){var n=e[t].string,r=e[t].prop;if(this.versionSearchString=e[t].versionSearch||e[t].identity,n){if(-1!=n.indexOf(e[t].subString))return e[t].identity}else if(r)return e[t].identity}},Adhese.prototype.Helper.prototype.searchVersion=function(e){var t=e.indexOf(this.versionSearchString);if(-1!=t)return parseFloat(e.substring(t+this.versionSearchString.length+1))},Adhese.prototype.Helper.prototype.merge=function(e,t){var n={};for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n},Adhese.prototype.Helper.prototype.stringToHex=function(e){var t,n,r="";for(n=0;n<e.length;n++)t=e.charCodeAt(n).toString(16),r+=("000"+t).slice(-4);return r},Adhese.prototype.Helper.prototype.createCookie=function(e,t,n){if(n){var r=new Date;r.setTime(r.getTime()+24*n*60*60*1e3);var i="; expires="+r.toGMTString()}else var i="";document.cookie=e+"="+t+i+"; path=/"},Adhese.prototype.Helper.prototype.readCookie=function(e){for(var t=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var i=n[r];" "==i.charAt(0);)i=i.substring(1,i.length);if(0==i.indexOf(t))return i.substring(t.length,i.length)}return null},Adhese.prototype.Helper.prototype.eraseCookie=function(e){this.createCookie(e,"",-1)},Adhese.prototype.Helper.prototype.eatsCookie=function(){return this.createCookie("adheseTestCookie","",1),this.readCookie("adheseTestCookie")?(this.eraseCookie("adheseTestCookie"),!0):!1},Adhese.prototype.Helper.prototype.getMetaContent=function(e){for(var t=document.getElementsByTagName("META"),n=[],r=t.length-1;r>=0;r--){var i=t[r];i&&(i.name===e||i.getAttribute("property")===e)&&i.content&&n.push(i.content)}return n},Adhese.prototype.Helper.prototype.adhElementInViewport=function(e){if("string"==typeof e&&(e=document.getElementById(e)),e){var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}return!1};var AdheseAjax={request:function(e){"string"==typeof e&&(e={url:e}),e.url=e.url||"",e.method=e.method||"get",e.data=e.data||{};var t=function(e,t){var n,r=[];for(var i in e)r.push(i+"="+encodeURIComponent(e[i]));return n=r.join("&"),""!=n?t?t.indexOf("?")<0?"?"+n:"&"+n:n:""},n={host:{},process:function(e){var n=this;this.xhr=null;try{this.xhr=new ActiveXObject("Msxml2.XMLHTTP")}catch(r){try{this.xhr=new ActiveXObject("Microsoft.XMLHTTP")}catch(r){try{this.xhr=new XMLHttpRequest}catch(r){this.xhr=!1}}}return this.xhr&&(this.xhr.onreadystatechange=function(){if(4==n.xhr.readyState&&200==n.xhr.status){var t=n.xhr.responseText;e.json===!0&&"undefined"!=typeof JSON&&(t=JSON.parse(t)),n.doneCallback&&n.doneCallback.apply(n.host,[t,n.xhr])}else 4==n.xhr.readyState&&n.failCallback&&n.failCallback.apply(n.host,[n.xhr]);n.alwaysCallback&&n.alwaysCallback.apply(n.host,[n.xhr])}),"get"==e.method?this.xhr.open("GET",e.url+t(e.data,e.url),!0):(this.xhr.open(e.method,e.url,!0),this.setHeaders({"X-Requested-With":"XMLHttpRequest","Content-type":"application/x-www-form-urlencoded"})),e.headers&&"object"==typeof e.headers&&this.setHeaders(e.headers),setTimeout(function(){"get"==e.method?n.xhr.send():n.xhr.send(t(e.data))},20),this},done:function(e){return this.doneCallback=e,this},fail:function(e){return this.failCallback=e,this},always:function(e){return this.alwaysCallback=e,this},setHeaders:function(e){for(var t in e)this.xhr&&this.xhr.setRequestHeader(t,e[t])}};return n.process(e)}};Adhese.prototype.Detection=function(){return this},Adhese.prototype.Detection.prototype.device=function(e){return e=e?e:window.navigator.userAgent,this.deviceType=e.match(/webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini|Mobile Safari|SymbianOS/i)&&!e.match(/Android/i)?"phone":e.match(/Mobile/i)&&e.match(/Android/i)?"phone":e.match(/iPad|Android|Tablet|Silk/i)?"tablet":"desktop",this.deviceType},function(e,t,n){"undefined"!=typeof module&&module.exports?module.exports=n():"function"==typeof define&&define.amd?define(n):t[e]=n()}("Fingerprint",this,function(){"use strict";var e=function(e){var t,n;t=Array.prototype.forEach,n=Array.prototype.map,this.each=function(e,n,r){if(null!==e)if(t&&e.forEach===t)e.forEach(n,r);else if(e.length===+e.length){for(var i=0,o=e.length;o>i;i++)if(n.call(r,e[i],i,e)==={})return}else for(var s in e)if(e.hasOwnProperty(s)&&n.call(r,e[s],s,e)==={})return},this.map=function(e,t,r){var i=[];return null==e?i:n&&e.map===n?e.map(t,r):(this.each(e,function(e,n,o){i[i.length]=t.call(r,e,n,o)}),i)},"object"==typeof e?(this.hasher=e.hasher,this.screen_resolution=e.screen_resolution,this.canvas=e.canvas,this.ie_activex=e.ie_activex):"function"==typeof e&&(this.hasher=e)};return e.prototype={get:function(){var e=[];if(e.push(navigator.userAgent),e.push(navigator.language),e.push(screen.colorDepth),this.screen_resolution){var t=this.getScreenResolution();"undefined"!=typeof t&&e.push(this.getScreenResolution().join("x"))}return e.push((new Date).getTimezoneOffset()),e.push(this.hasSessionStorage()),e.push(this.hasLocalStorage()),e.push(!!window.indexedDB),e.push(document.body?typeof document.body.addBehavior:"undefined"),e.push(typeof window.openDatabase),e.push(navigator.cpuClass),e.push(navigator.platform),e.push(navigator.doNotTrack),e.push(this.getPluginsString()),this.canvas&&this.isCanvasSupported()&&e.push(this.getCanvasFingerprint()),this.hasher?this.hasher(e.join("###"),31):this.murmurhash3_32_gc(e.join("###"),31)},murmurhash3_32_gc:function(e,t){var n,r,i,o,s,a,h,c;for(n=3&e.length,r=e.length-n,i=t,s=3432918353,a=461845907,c=0;r>c;)h=255&e.charCodeAt(c)|(255&e.charCodeAt(++c))<<8|(255&e.charCodeAt(++c))<<16|(255&e.charCodeAt(++c))<<24,++c,h=(65535&h)*s+(((h>>>16)*s&65535)<<16)&4294967295,h=h<<15|h>>>17,h=(65535&h)*a+(((h>>>16)*a&65535)<<16)&4294967295,i^=h,i=i<<13|i>>>19,o=5*(65535&i)+((5*(i>>>16)&65535)<<16)&4294967295,i=(65535&o)+27492+(((o>>>16)+58964&65535)<<16);switch(h=0,n){case 3:h^=(255&e.charCodeAt(c+2))<<16;case 2:h^=(255&e.charCodeAt(c+1))<<8;case 1:h^=255&e.charCodeAt(c),h=(65535&h)*s+(((h>>>16)*s&65535)<<16)&4294967295,h=h<<15|h>>>17,h=(65535&h)*a+(((h>>>16)*a&65535)<<16)&4294967295,i^=h}return i^=e.length,i^=i>>>16,i=2246822507*(65535&i)+((2246822507*(i>>>16)&65535)<<16)&4294967295,i^=i>>>13,i=3266489909*(65535&i)+((3266489909*(i>>>16)&65535)<<16)&4294967295,i^=i>>>16,i>>>0},hasLocalStorage:function(){try{return!!window.localStorage}catch(e){return!0}},hasSessionStorage:function(){try{return!!window.sessionStorage}catch(e){return!0}},isCanvasSupported:function(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))},isIE:function(){return"Microsoft Internet Explorer"===navigator.appName?!0:"Netscape"===navigator.appName&&/Trident/.test(navigator.userAgent)?!0:!1},getPluginsString:function(){return this.isIE()&&this.ie_activex?this.getIEPluginsString():this.getRegularPluginsString()},getRegularPluginsString:function(){return this.map(navigator.plugins,function(e){var t=this.map(e,function(e){return[e.type,e.suffixes].join("~")}).join(",");return[e.name,e.description,t].join("::")},this).join(";")},getIEPluginsString:function(){if(window.ActiveXObject){var e=["ShockwaveFlash.ShockwaveFlash","AcroPDF.PDF","PDF.PdfCtrl","QuickTime.QuickTime","rmocx.RealPlayer G2 Control","rmocx.RealPlayer G2 Control.1","RealPlayer.RealPlayer(tm) ActiveX Control (32-bit)","RealVideo.RealVideo(tm) ActiveX Control (32-bit)","RealPlayer","SWCtl.SWCtl","WMPlayer.OCX","AgControl.AgControl","Skype.Detection"];return this.map(e,function(e){try{return new ActiveXObject(e),e}catch(t){return null}}).join(";")}return""},getScreenResolution:function(){return[screen.height,screen.width]},getCanvasFingerprint:function(){var e=document.createElement("canvas"),t=e.getContext("2d"),n="http://valve.github.io";return t.textBaseline="top",t.font="14px 'Arial'",t.textBaseline="alphabetic",t.fillStyle="#f60",t.fillRect(125,1,62,20),t.fillStyle="#069",t.fillText(n,2,15),t.fillStyle="rgba(102, 204, 0, 0.7)",t.fillText(n,4,17),e.toDataURL()}},e}),Adhese.prototype.Events=function(){},Adhese.prototype.Events.prototype.add=function(e,t,n){n||(n=window),window.addEventListener?n.addEventListener(e,t,!1):window.attachEvent&&n.attachEvent("on"+e,t)},Adhese.prototype.Events.prototype.remove=function(e,t,n){n||(n=window),window.removeEventListener?n.removeEventListener(e,t,!1):window.attachEvent&&n.detachEvent("on"+e,t)},Adhese.prototype.rubiconUserSync=function(e){e&&e.rp_account&&""!=e.rp_account&&-1==document.cookie.indexOf("rubicon_uid")&&((new Image).src="http://pixel-eu.rubiconproject.com/exchange/sync.php?p="+e.rp_account)},AdheseVastWrapper.prototype.init=function(){this.eventListeners=new Array,this.trackedImpressions=new Array,this.activeAds=new Array,this.schedule={},this.helper=new AdheseVastHelper},AdheseVastWrapper.prototype.requestAds=function(e,t,n){var r=e+"/jsonp/adhese.parseVastJson";for(var i in n)r+="/sl"+t+"-"+n[i];r+="/?t="+(new Date).getTime(),"demo"==e&&(r="http://pool.demo.adhese.com/demo.json");var o=document.createElement("script");o.type="text/javascript",o.src=r,document.getElementsByTagName("head")[0].appendChild(o)},AdheseVastWrapper.prototype.parseAdBreak=function(){},AdheseVastWrapper.prototype.parseInLine=function(e){console.log(e);var t="offset"+e.attributes.getNamedItem("id").nodeValue;this.debug&&console.log("creating ad with code: "+t);for(var n=new Array,r=e.getElementsByTagName("Impression"),i=0;i<r.length;i++)n.push(r[i].firstChild.nodeValue);for(var o=new Array,s=e.getElementsByTagName("Linear"),a=0;a<s.length;a++){for(var h=new Array,c=s[a].getElementsByTagName("MediaFile"),i=0;i<c.length;i++)h.push(new AdheseVastMediaFile(c[i].firstChild.nodeValue,c[i].attributes.getNamedItem("type").value));for(var d=new Object,u=s[a].getElementsByTagName("Tracking"),i=0;i<u.length;i++)d[u[i].attributes.getNamedItem("event").nodeValue]||(d[u[i].attributes.getNamedItem("event").value]=new Array),d[u[i].attributes.getNamedItem("event").nodeValue].push(u[i].firstChild.nodeValue);for(var p=s[a].getElementsByTagName("ClickTracking"),i=0;i<u.length;i++)d.click||(d.click=new Array),p[i]&&p[i].firstChild.nodeValue&&""!=p[i].firstChild.nodeValue&&d.click.push(p[i].firstChild.nodeValue);for(var l="",g=s[a].getElementsByTagName("ClickThrough"),i=0;i<g.length;i++)l=g[i].firstChild.nodeValue;var f=s[a].getElementsByTagName("Duration")[0].firstChild,y=0;null!==f&&(y=s[a].getElementsByTagName("Duration")[0].firstChild.nodeValue);var m=new AdheseVastLinearAd(t,h,y,this.helper.getDurationInSeconds(y),d,l);o.push(m)}for(var A=new Array,v=e.getElementsByTagName("NonLinear"),a=0;a<v.length;a++){for(var d=new Object,u=v[a].getElementsByTagName("Tracking"),i=0;i<u.length;i++)d[u[i].attributes.getNamedItem("event").nodeValue]||(d[u[i].attributes.getNamedItem("event").value]=new Array),d[u[i].attributes.getNamedItem("event").nodeValue].push(u[i].firstChild.nodeValue);for(var p=v[a].getElementsByTagName("NonLinearClickTracking"),i=0;i<u.length;i++)d.click||(d.click=new Array),p[i]&&p[i].firstChild.nodeValue&&""!=p[i].firstChild.nodeValue&&d.click.push(p[i].firstChild.nodeValue);for(var l="",g=v[a].getElementsByTagName("NonLinearClickThrough"),i=0;i<g.length;i++)l=g[i].firstChild.nodeValue;var w=new AdheseVastNonLinearAd(v[i].attributes.getNamedItem("id").value,v[i].attributes.getNamedItem("width").value,v[i].attributes.getNamedItem("height").value,d,l),k=v[i].getElementsByTagName("StaticResource");k.length>0&&C.setStaticResource(k[0].firstChild.nodeValue);var k=v[i].getElementsByTagName("HTMLResource");k.length>0&&C.setHTMLResource(k[0].firstChild.nodeValue);var k=v[i].getElementsByTagName("IFrameResource");k.length>0&&C.setIFrameResource(k[0].firstChild.nodeValue),A.push(w)}for(var b=new Array,T=e.getElementsByTagName("Companion"),i=0;i<T.length;i++){var C=new AdheseVastCompanion(T[i].attributes.getNamedItem("id").value,T[i].attributes.getNamedItem("width").value,T[i].attributes.getNamedItem("height").value,T[i].attributes.getNamedItem("adSlotId").value),k=T[i].getElementsByTagName("StaticResource");k.length>0&&(console.log(k[0]),C.setStaticResource(k[0].firstChild.nodeValue));var k=T[i].getElementsByTagName("HTMLResource");k.length>0&&C.setHTMLResource(k[0].firstChild.nodeValue);var k=T[i].getElementsByTagName("IFrameResource");k.length>0&&C.setIFrameResource(k[0].firstChild.nodeValue),b.push(C)}for(var a=0;a<o.length;a++)o[a].setCompanions(b);var V=new AdheseVastInLine(n,o);this.schedule[t]=V,this.debug&&console.log(this.schedule)},AdheseVastWrapper.prototype.parseVastJson=function(e){if(!e||0==e.length)return void this.fireAdsLoaded();var t=this.parseXML(e[0].tag),n=t.getElementsByTagName("Ad"),r=this;if(0===n.length)return void this.fireAdsLoaded();for(var i=0;i<n.length;i++)if(n[i].getElementsByTagName("InLine").length>0)this.parseInLine(n[i]),this.fireAdsLoaded();else{var o=n[i].attributes.getNamedItem("code").nodeValue,s=n[i].getElementsByTagName("Impression");AdheseAjax.request({url:n[i].getElementsByTagName("VASTAdTagURI")[0].firstChild.nodeValue,method:"get",json:!1}).done(function(e){for(var t=r.parseXML(e),n=t.getElementsByTagName("Ad"),i=0;i<n.length;i++){n[i].setAttribute("code",o);for(var a=0;a<s.length;a++)n[i].getElementsByTagName("InLine")[0].insertBefore(s[a],n[i].getElementsByTagName("Impression")[0]);n[i].getElementsByTagName("InLine").length>0?r.parseInLine(n[i]):r.debug&&console.log("Too many redirects")}r.fireAdsLoaded()})}},AdheseVastWrapper.prototype.parseXML=function(e){if(this.debug&&console.log(typeof window.DOMParser),"undefined"!=typeof window.DOMParser)return(new window.DOMParser).parseFromString(e,"text/xml");if("undefined"!=typeof window.ActiveXObject&&new window.ActiveXObject("Microsoft.XMLDOM")){var t=new window.ActiveXObject("Microsoft.XMLDOM");return t.async="false",t.loadXML(e),t}return void 0},AdheseVastWrapper.prototype.addEventListener=function(e,t){this.eventListeners.push(new AdheseVastEventListener(e,t))},AdheseVastWrapper.prototype.fireAdsLoaded=function(){for(var e=0;e<this.eventListeners.length;e++)"ADS_LOADED"==this.eventListeners[e].getEvent()&&(this.debug&&console.log("ADS_LOADED sent to listener"),this.eventListeners[e].getListener().apply())},AdheseVastWrapper.prototype.getSchedule=function(){var e=new Array;for(var t in this.schedule)e.push(t);return e},AdheseVastWrapper.prototype.hasAd=function(e,t){return this.schedule&&this.schedule[e]&&this.schedule[e].creatives?void 0!=this.schedule[e].creatives[t]:!1},AdheseVastWrapper.prototype.hasScheduledAdForOffset=function(e){if(this.schedule)for(key in this.schedule)if(key=="offset"+e)return console.log("found ad scheduled for this time"),!0;return!1},AdheseVastWrapper.prototype.getImpression=function(e){return this.schedule[e].getImpressions()},AdheseVastWrapper.prototype.getClick=function(e,t){return this.schedule[e].creatoves[t].getClick()},AdheseVastWrapper.prototype.getTrackers=function(e,t){return this.schedule[e].creatives[t].getTrackers()},AdheseVastWrapper.prototype.getMediafile=function(e,t,n){for(var r=this.schedule[e].creatives[t].getMediafile(),i=0;i<r.length;i++)if(r[i].getType()==n)return r[i].getSrc();return void 0},AdheseVastWrapper.prototype.getDuration=function(e,t){return this.schedule[e].creatives[t].getDuration()},AdheseVastWrapper.prototype.getDurationInSeconds=function(e,t){return this.schedule[e].creatives[t].getDurationInSeconds()},AdheseVastWrapper.prototype.getCompanions=function(e,t){return this.schedule[e].creatives[t].getCompanions()},AdheseVastWrapper.prototype.track=function(e){if(e)for(var t=0;t<e.length;t++)if(this.trackedImpressions[e[t]])this.debug&&console.log("Already tracked "+e[t]);else{this.trackedImpressions[e[t]]=1;var n=document.createElement("img");n.src=e[t]+((-1==e[t].indexOf("?")?"?adhche=":"&adhche=")+(new Date).getTime())}},AdheseVastWrapper.prototype.timeupdate=function(e,t,n){if(this.debug&&console.log(e+" / "+t+" timeupdate @"+n+" sec."),.5>n)this.debug&&console.log("Tracking impression for "+e),this.track(this.getImpression(e)),this.getTrackers(e,t).start&&(this.debug&&console.log("Tracking start for "+e),this.track(this.getTrackers(e,t).start));else{var r=n/this.schedule[e].creatives[t].getDurationInSeconds();this.getTrackers(e,t).firstQuartile&&r.toFixed(2)>.25?(this.debug&&console.log("Tracking first quartile for "+e+" - "+this.getTrackers(e,t).firstQuartile),this.track(this.getTrackers(e,t).firstQuartile)):this.getTrackers(e,t).midpoint&&r.toFixed(2)>.5?(this.debug&&console.log("Tracking mid point for "+e),this.track(this.getTrackers(e,t).midpoint)):this.getTrackers(e,t).thirdQuartile&&r.toFixed(2)>.75&&(this.debug&&console.log("Tracking third quartile for "+e),this.track(this.getTrackers(e,t).thirdQuartile))}},AdheseVastWrapper.prototype.clicked=function(e,t,n){this.debug&&console.log("tracker clicked for "+e+" @"+n),this.debug&&console.log("open new window with VideoClicks>ClickThrough"),this.helper.openNewWindow(this.getClick(e,t)),this.track(this.getTrackers(e,t).click)},AdheseVastWrapper.prototype.ended=function(e,t,n){this.debug&&console.log(e+" ended @"+n),this.debug&&console.log("tracker complete for "+e),this.track(this.getTrackers(e,t).complete)},AdheseVastAdBreak.prototype.getBreakId=function(){return this.breakId},AdheseVastAdBreak.prototype.getTimeOffset=function(){return this.timeOffset},AdheseVastAdBreak.prototype.getAds=function(){return this.ads},AdheseVastInLine.prototype.getImpressions=function(){return this.impressions},AdheseVastInLine.prototype.getCreatives=function(){return this.creatives},AdheseVastLinearAd.prototype.getId=function(){return this.id},AdheseVastLinearAd.prototype.getMediafile=function(){return this.mediafile},AdheseVastLinearAd.prototype.getDuration=function(){return this.duration},AdheseVastLinearAd.prototype.getDurationInSeconds=function(){return this.durationInSeconds},AdheseVastLinearAd.prototype.getTrackers=function(){return this.trackers},AdheseVastLinearAd.prototype.getClick=function(){return this.click},AdheseVastLinearAd.prototype.setCompanions=function(e){this.companions=e},AdheseVastLinearAd.prototype.getCompanions=function(){return this.companions},AdheseVastMediaFile.prototype.getSrc=function(){return this.src},AdheseVastMediaFile.prototype.getType=function(){return this.type},AdheseVastCompanion.prototype.setStaticResource=function(e){this.StaticResource=e},AdheseVastCompanion.prototype.getStaticResource=function(){return this.StaticResource},AdheseVastCompanion.prototype.setHTMLResource=function(e){this.HTMLResource=e},AdheseVastCompanion.prototype.getHTMLResource=function(){return this.HTMLResource},AdheseVastCompanion.prototype.setIFrameResource=function(e){this.IFrameResource=e},AdheseVastCompanion.prototype.getIFrameResource=function(){return this.IFrameResource},AdheseVastCompanion.prototype.setCompanionClickThrough=function(e){this.CompanionClickThrough=e},AdheseVastCompanion.prototype.getCompanionClickThrough=function(){return this.CompanionClickThrough},AdheseVastCompanion.prototype.setCompanionClickTracking=function(e){this.CompanionClickTracking=e},AdheseVastCompanion.prototype.getCompanionClickTracking=function(){return this.CompanionClickTracking},AdheseVastNonLinearAd.prototype.setStaticResource=function(e){this.StaticResource=e},AdheseVastNonLinearAd.prototype.getStaticResource=function(){return this.StaticResource},AdheseVastNonLinearAd.prototype.setHTMLResource=function(e){this.HTMLResource=e},AdheseVastNonLinearAd.prototype.getHTMLResource=function(){return this.HTMLResource},AdheseVastNonLinearAd.prototype.setIFrameResource=function(e){this.IFrameResource=e},AdheseVastNonLinearAd.prototype.getIFrameResource=function(){return this.IFrameResource},AdheseVastNonLinearAd.prototype.setNonLinearClickThrough=function(e){this.NonLinearClickThrough=e},AdheseVastNonLinearAd.prototype.getNonLinearClickThrough=function(){return this.NonLinearClickThrough},AdheseVastNonLinearAd.prototype.setNonLinearClickTracking=function(e){this.NonLinearClickTracking=e},AdheseVastNonLinearAd.prototype.getNonLinearClickTracking=function(){return this.NonLinearClickTracking},AdheseVastNonLinearAd.prototype.getTrackers=function(){return this.trackers},AdheseVastNonLinearAd.prototype.getClick=function(){return this.click},AdheseVastEventListener.prototype.getEvent=function(){return this.event},AdheseVastEventListener.prototype.getListener=function(){return this.listener},AdheseVastHelper.prototype.getDurationInSeconds=function(e){if(e){var t=e.split(":");return 3==t.length?parseInt(3600*t[0])+parseInt(60*t[1])+parseInt(t[2]):2==t.length?parseInt(60*t[0])+parseInt(t[1]):1==t.length?parseInt(t[0]):0}return 0},AdheseVastHelper.prototype.openNewWindow=function(e){if(window){var t=window.open(e,"_blank");t.focus()}};