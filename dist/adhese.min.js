function Adhese(){return this.config={debug:!1},this.request={},this.ads=[],this.that=this,this.helper=new this.Helper,this}Adhese.prototype.Ad=function(t,e,i){var r={write:!1};return this.format=e,this.options=t.helper.merge(r,i),this},Adhese.prototype.init=function(t){t.debug&&(this.config.debug=t.debug),this.config.debug&&this.helper.log("Adhese: initializing..."),this.config.jquery="undefined"!=typeof jQuery,t.host&&(this.config.host=t.host),t.location&&"function"==typeof t.location?this.config.location=t.location():t.location&&"string"==typeof t.location&&(this.config.location=t.location),this.userAgent=this.helper.getUserAgent(),this.registerRequestParameter("rn",Math.round(1e4*Math.random())),this.registerRequestParameter("br","screen3"),this.registerRequestParameter("br","desktop");for(var e in this.userAgent)this.registerRequestParameter("br",this.userAgent[e]);this.config.debug&&(this.helper.log("Adhese: initialized with config:"),this.helper.log(this.config))},Adhese.prototype.registerRequestParameter=function(t,e){var i=this.request[t];i||(i=new Array),i.push(e),this.request[t]=i},Adhese.prototype.tag=function(t,e){var i=new this.Ad(this,t,e);return this.ads.push([t,i]),i.options.write&&this.write(i),i},Adhese.prototype.write=function(t){this.config.debug&&console.log("Adhese.write: request uri: "+this.getRequestUri(t,{type:"js"})),document.write('<script language="text/javascript" src="'+this.getRequestUri(t,{type:"js"})+'"></script>')},Adhese.prototype.track=function(t){this.helper.addTrackingPixel(t)},Adhese.prototype.getRequestUri=function(t,e){var i=this.config.host;switch(e||(e={type:"js"}),e.type){case"json":i+="json/sl"+this.config.location+"-"+t.format+"/";break;case"jsonp":i+="jsonp/callback/sl"+this.config.location+"-"+t.format+"/";break;default:i+="ad/sl"+this.config.location+"-"+t.format+"/"}for(var r in this.request){for(var n=r,o=0;o<this.request[r].length;o++)n+=this.request[r][o]+(this.request[r].length-1>o?";":"");i+=n+"/"}return i+="?t="+(new Date).getTime()},Adhese.prototype.Helper=function(){this.oslist=[{string:navigator.userAgent,subString:"Windows NT 6.2",identity:"Windows8"},{string:navigator.userAgent,subString:"Windows NT 6.1",identity:"Windows7"},{string:navigator.userAgent,subString:"Windows NT 6.0",identity:"WindowsVista"},{string:navigator.userAgent,subString:"Windows NT 5.1",identity:"WindowsXP"},{string:navigator.userAgent,subString:"Windows 98",identity:"Windows98"},{string:navigator.platform,subString:"Linux",identity:"Linux"},{string:navigator.userAgent,subString:"iPhone",identity:"iOS"},{string:navigator.userAgent,subString:"iPad",identity:"iOS"},{string:navigator.platform,subString:"Mac",identity:"OSX"},{string:navigator.userAgent,subString:"Android",identity:"Android"}],this.browserlist=[{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"}],this.devicelist=[{string:navigator.userAgent,subString:"iPad",identity:"iPad"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone"},{string:navigator.userAgent,subString:"Mac",identity:"Mac"}]},Adhese.prototype.Helper.prototype.log=function(t){console.log(t)},Adhese.prototype.Helper.prototype.getMetaTagContent=function(){},Adhese.prototype.Helper.prototype.getQueryStringParameter=function(){var t=RegExp("[?&]"+key+"=([^&]*)").exec(window.location.search);return t?decodeURIComponent(t[1].replace(/\+/g," ")):default_},Adhese.prototype.Helper.prototype.addTrackingPixel=function(t){var e=document.createElement("img");e.src=t+this.timestamp(s),e.style.height="1px",e.style.width="1px",e.style.margin="-1px",e.style.border="0",e.style.position="absolute",e.style.top="0",document.body.appendChild(e)},Adhese.prototype.Helper.prototype.getScreenProperties=function(){var t=new Object;return t.width=window.innerWidth?window.innerWidth:document.body.offsetWidth,t.height=window.innerHeight?window.innerHeight:document.body.offsetHeight,t},Adhese.prototype.Helper.prototype.addEventListener=function(){adhese.config.jquery?$(window).bind(t,f):window.addEventListener?window.addEventListener(t,f,!1):window.attachEvent&&window.attachEvent("on"+t,f)},Adhese.prototype.Helper.prototype.removeEventListener=function(){adhese.config.jquery?$(window).unbind(t,f):window.removeEventListener?window.removeEventListener(t,f,!1):window.detachEvent&&window.detachEvent("on"+t,f)},Adhese.prototype.Helper.prototype.getAbsoluteOffset=function(t){var e={top:0,left:0};if("undefined"!=typeof t)for(e.left=0,e.top=0;t;t=t.offsetParent)e.left+=t.offsetLeft,e.top+=t.offsetTop;return e},Adhese.prototype.Helper.prototype.getUserAgent=function(){var t={};return t.browser=this.searchString(this.browserlist)||"unknownBrowser",t.browserVersion=t.browser+this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"unknownVersion",t.os=this.searchString(this.oslist)||"unknownOS",t},Adhese.prototype.Helper.prototype.searchString=function(t){for(var e=0;e<t.length;e++){var i=t[e].string,r=t[e].prop;if(this.versionSearchString=t[e].versionSearch||t[e].identity,i){if(-1!=i.indexOf(t[e].subString))return t[e].identity}else if(r)return t[e].identity}},Adhese.prototype.Helper.prototype.searchVersion=function(t){var e=t.indexOf(this.versionSearchString);if(-1!=e)return parseFloat(t.substring(e+this.versionSearchString.length+1))},Adhese.prototype.Helper.prototype.merge=function(t,e){var i={};for(var r in t)i[r]=t[r];for(var r in e)i[r]=e[r];return i};